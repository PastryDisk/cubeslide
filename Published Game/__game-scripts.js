var health=pc.createScript("Health");health.attributes.add("progressImage",{type:"entity"}),health.attributes.add("progressImageMaxWidth",{type:"number"}),health.prototype.initialize=function(){this.paused=!1,this.game=this.app.root.findByName("game"),this.app.on("game:reset",this.reset,this),this.app.on("game:pickup",this.pickup,this),this.app.on("game:damage",this.damage,this),this.setHealth(1),this.increase=!1},health.prototype.setHealth=function(t){t=pc.math.clamp(t,0,1),this.progress=t;var e=pc.math.lerp(0,this.progressImageMaxWidth,t);this.progressImage.element.width=e,this.progressImage.element.rect.z=t,this.progressImage.element.rect=this.progressImage.element.rect},health.prototype.reset=function(){this.setHealth(1)},health.prototype.pickup=function(t){this.setHealth(this.progress+t)},health.prototype.damage=function(t){this.setHealth(this.progress-t)},health.prototype.update=function(t){this.setHealth(this.progress-.001),0===this.progress&&this.game.script.game.gameOver()};var Jump=pc.createScript("jump");Jump.prototype.initialize=function(){this.game=this.app.root.findByName("game"),this.app.on("jump:reset",this.reset,this)},Jump.prototype.update=function(t){var i=this.entity.getPosition().y;this.game.script.game._state==Game.STATE_INGAME&&i<=2.1&&this.app.keyboard.wasPressed(pc.KEY_SPACE)&&(this.game.script.game.getScore()<=15?this.entity.rigidbody.applyImpulse(0,6,0):this.entity.rigidbody.applyImpulse(0,5,0)),i<=2.05&&!this.entity.sound.slot("slide").isPlaying&&this.entity.sound.play("slide"),i>2.05&&this.entity.sound.slot("slide").isPlaying&&this.entity.sound.stop("slide")},Jump.prototype.reset=function(){this.entity.rigidbody.applyImpulse(0,4,0)};var BtnScene=pc.createScript("btnScene");BtnScene.attributes.add("sceneName",{type:"string",default:"",title:"Scene Name to Load"}),BtnScene.prototype.initialize=function(){this.entity.element.on("mousedown",this.onPress,this),this.entity.element.on("touchstart",this.onPress,this)},BtnScene.prototype.loadScene=function(e){var t=this.app.root.findByName("Root"),n=this.app.scenes.find(e);this.app.scenes.loadScene(n.url,function(e,n){e?console.error(e):(t.destroy(),pc.ComponentSystem.initialize(n.root),pc.ComponentSystem.postInitialize(n.root))})},BtnScene.prototype.onPress=function(e){this.loadScene(this.sceneName)};var Game=pc.createScript("game");Game.attributes.add("uiInGame",{type:"entity"}),Game.attributes.add("uiGameOver",{type:"entity"}),Game.STATE_INGAME="ingame",Game.STATE_GAMEOVER="gameover",Game.prototype.initialize=function(){this._state=Game.STATE_INGAME,this._score=0,this._scoref=0,this.uiInGame.enabled=!0,this.uiGameOver.enabled=!1,this.app.on("ui:reset",this.reset,this)},Game.prototype.gameOver=function(){this._state=Game.STATE_GAMEOVER,this.app.fire("game:gameover"),this.uiInGame.enabled=!1,this.uiGameOver.enabled=!0},Game.prototype.reset=function(){this.app.fire("game:reset"),this.resetScore(),this._state=Game.STATE_INGAME,this.uiGameOver.enabled=!1,this.uiInGame.enabled=!0},Game.prototype.getScore=function(){return this._score},Game.prototype.update=function(){this._state==Game.STATE_INGAME&&(this._score+=.01,this.app.fire("game:score",Math.floor(this._score))),this._state==Game.STATE_GAMEOVER&&Math.floor(this._score)>this._scoref&&(this.app.fire("game:high",Math.floor(this._score)),this._scoref=Math.floor(this._score))},Game.prototype.resetScore=function(){this._score=0,this.app.fire("game:score",this._score)};var Score=pc.createScript("score");Score.prototype.initialize=function(){this.score=this.entity.findByName("Score"),this.on("enable",this.onEnable,this),this.onEnable()},Score.prototype.onEnable=function(){this.app.on("game:score",this._changeScore,this),this._changeScore(0)},Score.prototype._changeScore=function(e){this.score.element.text=e.toString()};var SpawnItem=pc.createScript("spawnItem");SpawnItem.attributes.add("material",{type:"asset",assetType:"material"}),SpawnItem.prototype.initialize=function(){this.spawnItem(),this.app.on("spawnI:create",this.spawnItem,this)},SpawnItem.prototype.update=function(t){},SpawnItem.prototype.spawnItem=function(){var t=new pc.Entity;t.addComponent("model",{type:"plane"}),t.addComponent("collision",{type:"box",halfExtents:[.25,.25,.25]}),t.addComponent("script"),t.script.create("trigger"),t.script.create("moveItem"),t.model.material=this.material.resource,t.setLocalPosition(pc.math.random(5,7),3.5,0),t.setEulerAngles(90,0,90),t.setLocalScale(.5,.5,.5),this.app.root.addChild(t)};var BtnReset=pc.createScript("btnReset");BtnReset.prototype.initialize=function(){this.entity.element.on("mousedown",this.onPress,this),this.entity.element.on("touchstart",this.onPress,this),this.on("enable",this.onEnable,this),this.on("disable",this.onDisable,this)},BtnReset.prototype.onPress=function(e){this.app.fire("ui:reset"),this.app.fire("moveB:reset"),this.app.fire("jump:reset"),this.app.fire("moveG:reset"),this.app.fire("spawnI:create"),this.app.fire("spawnS:create")};var Trigger=pc.createScript("trigger");Trigger.prototype.initialize=function(){this.entity.collision.on("triggerenter",this.onTriggerEnter,this),this.game=this.app.root.findByName("game")},Trigger.prototype.onTriggerEnter=function(){this.app.fire("game:pickup",.2),this.entity.destroy(),this.app.fire("spawnI:create")},Trigger.prototype.update=function(t){this.entity.getPosition().x<=-5&&(this.entity.destroy(),this.game.script.game._state==Game.STATE_INGAME&&this.app.fire("spawnI:create")),this.game.script.game._state==Game.STATE_GAMEOVER&&this.entity.destroy()};var MoveItem=pc.createScript("moveItem");MoveItem.attributes.add("speed",{type:"number",default:.002,max:.005}),MoveItem.prototype.initialize=function(){this.vec=this.entity.getLocalPosition(),this.game=this.app.root.findByName("game")},MoveItem.prototype.update=function(e){var t=new pc.Vec3(-10,this.vec.y,0);speed=pc.math.clamp(6e-5*this.game.script.game.getScore()+.002,.002,.005),this.vec.lerp(this.vec,t,speed),this.entity.setLocalPosition(this.vec)};var MoveBackground=pc.createScript("moveBackground");MoveBackground.attributes.add("speed",{type:"number",default:.001,max:.005}),MoveBackground.attributes.add("x1",{type:"number"}),MoveBackground.attributes.add("y1",{type:"number"}),MoveBackground.attributes.add("z1",{type:"number"}),MoveBackground.prototype.initialize=function(){this.vec=this.entity.getLocalPosition(),this.game=this.app.root.findByName("game"),this.app.on("moveB:reset",this.reset,this)},MoveBackground.prototype.update=function(t){var e=new pc.Vec3(this.entity.getPosition().x-20,2.689,-3.468);speed=pc.math.clamp(3e-5*this.game.script.game.getScore()+.001,.001,.005),this.entity.getPosition().x<=-14.9?this.entity.setPosition(30-.03*this.game.script.game.getScore(),2.689,-3.468):(this.vec.lerp(this.vec,e,speed),this.entity.setLocalPosition(this.vec))},MoveBackground.prototype.reset=function(){this.entity.setPosition(this.x1,this.y1,this.z1)};var MoveGround=pc.createScript("moveGround");MoveGround.attributes.add("speed",{type:"number",default:.001,max:.005}),MoveGround.attributes.add("x1",{type:"number"}),MoveGround.attributes.add("y1",{type:"number"}),MoveGround.attributes.add("z1",{type:"number"}),MoveGround.prototype.initialize=function(){this.vec=this.entity.getLocalPosition(),this.game=this.app.root.findByName("game"),this.app.on("moveG:reset",this.reset,this)},MoveGround.prototype.update=function(t){var e=new pc.Vec3(this.entity.getPosition().x-20,1,0);speed=pc.math.clamp(3e-5*this.game.script.game.getScore()+.001,.001,.005),this.entity.getPosition().x<=-14.9?this.entity.setPosition(9-.01*this.game.script.game.getScore(),1,0):(this.vec.lerp(this.vec,e,speed),this.entity.setLocalPosition(this.vec))},MoveGround.prototype.reset=function(){this.entity.setPosition(this.x1,this.y1,this.z1)};var SpawnSpike=pc.createScript("spawnSpike");SpawnSpike.attributes.add("material",{type:"asset",assetType:"material"}),SpawnSpike.prototype.initialize=function(){this.spawnSpike(),this.app.on("spawnS:create",this.spawnSpike,this)},SpawnSpike.prototype.update=function(t){},SpawnSpike.prototype.spawnSpike=function(){var t=new pc.Entity;t.addComponent("model",{type:"asset",asset:"35555540"}),t.addComponent("collision",{type:"box",halfExtents:[.22,.25,.4]}),t.addComponent("script"),t.script.create("triggerSpike"),t.script.create("moveItem"),t.model.material=this.material.resource,t.setLocalPosition(pc.math.random(7,10),2,0),t.setEulerAngles(0,90,0),this.app.root.addChild(t)};var TriggerSpike=pc.createScript("triggerSpike");TriggerSpike.prototype.initialize=function(){this.entity.collision.on("triggerenter",this.onTriggerEnter,this),this.game=this.app.root.findByName("game")},TriggerSpike.prototype.update=function(t){this.entity.getPosition().x<=-5&&(this.entity.destroy(),this.game.script.game._state==Game.STATE_INGAME&&this.app.fire("spawnS:create")),this.game.script.game._state==Game.STATE_GAMEOVER&&this.entity.destroy()},TriggerSpike.prototype.onTriggerEnter=function(){this.app.fire("game:damage",.3)};var HighScore=pc.createScript("highScore");HighScore.prototype.initialize=function(){this.score=this.entity.findByName("Score"),this.score.element.text="High Score: 0",this.app.on("game:high",this._changeHighScore,this)},HighScore.prototype._changeHighScore=function(e){this.score.element.text="High Score: "+e.toString()};